尤记得侯捷老师一上来就自带大佬腔调讲类的模版，讲完模版就讲类的口吻。

我在c++起步的时候，是理解不了他的课程的，至于网上那么多推荐他的课程给入门者的帖子，没必要迷信。

今天无意中写了如下代码：
```cpp
class test_class {
public:
    test_class *front;
};

int test() {
    test_class Q;
}
```

按照正常逻辑初始化`Q`在栈上，没毛病吧。

编译器没说啥，警告都没(`Apple clang version 13.1.6 (clang-1316.0.21.2)`)，IDE提示说`Clang-Tidy: Uninitialized record type: 'Q'`

![](https://upload.nhyilin.cn/2022-03-15-135234.png)

之前遇到过这个小的提示没放在心上，今天查了查看确实还有说法。

[clang官方文档](https://clang.llvm.org/extra/clang-tidy/checks/cppcoreguidelines-pro-type-member-init.html)大概是这个意思：这个问题的关键在于**check flags**，按我的理解应该翻译如下“检查标记用户定义的构造函数”。该检查标志着用户定义的构造函数定义没有初始化所有默认构造会留下未定义状态的字段，例如，没有用户提供的默认构造函数中至少包含一个这样的类型的内置物、指针和记录类型。如果这些字段没有被初始化，构造器将使一些内存处于未定义状态。

对于C++11，它建议修复添加类内字段初始化器。对于旧版本，它将字段初始化器插入构造函数初始化器列表中。它还将初始化任何需要在构造函数初始化器列表中归零的直接基类。

该检查将构造函数主体中的字段赋值考虑在内，但对于在构造函数主体中调用的方法中初始化的字段会产生误报。

该检查还标记了具有自动存储期限的变量，这些变量具有没有用户提供的构造器的记录类型，并且没有被初始化。建议的修复方法是，对于C++11及以后的版本，通过`{}`对变量进行零初始化，或者对于较早的语言版本`={}`。

总之：这个警告提醒你，你可能有未初始化的成员变量。

想起之前的一个`new`[操作符的问题](https://nhyilin.cn/archives/14.html)，也是build阶段没有报错，但是IDE提示了警告，算是对语法的警示吧。

anyway这个ide是clion，这玩意几乎每个单词底下都画满了警示线，甚至提示你这个函数可以弄成静态的，看起来真实搞死强迫症，对养成好的编程习惯来说还是很有力的工具的。

啊，没问题的代码不用我说应该知道是什么样子了吧。

```cpp
class test_class {
public:
    test_class *front;
};

int test() {
    test_class Q{};
}
```

讲真，侯捷老师的课还是要好好看，这个知识点他第一节课就说过了。