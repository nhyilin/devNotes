# 项目综述

本次任务主要目标是读取格式为csv的精度测试数据，将尖探针的中心点的坐标值，以四元数的形式旋转、bias变量参与平移，尖探针的五个点转移到到基座参考系下对应的的五个点，并与原来的五个点产生距离偏差，以此来测试系统精度。

# 主要思路


着手前顺序思考，按照读取>计算>写出的顺序，并且先进行单个文件的操作，最后再进行遍历所有文件的思路。

所以先搭建了“读-旋转-偏移-均值-写出”的整体框架（事实应该先搭建函数框架，而非功能框架）

将整个流程写完后进行了很多遍的重构，其中包括函数抽取以及变量名修改，重构最后阶段还修改了读文件的逻辑，将readFile返回值为单一的坐标，修改为获取出所有目标数据的list，这样在计算逻辑上大大减少了打开文件读取的次数


这样写完框架再修补的方式，后期会多出来一小部分不必要的工作，但是有一点好处就是在项目初期如果能够保证框架思路的准确性，那么后期不必在代码逻辑上花过多心思，只需要考虑语法以及实现部分功能的方法就可以了。

比如这次在读文件函数的输出时，由需要多次通过函数获取输出，到一次输出维度更大的清单，虽然影响比较大，但是重构完这个函数，其他调用这个函数的功能只需要稍微修改他们的传入格式就能完美适配新的readFile

**最重要的是保证框架的逻辑准确**


# 积累

1. 很多很多语法上的知识。比如for循环，python的main函数，常量提前定义，库的慎重引用，打印消耗内存随时验证当前代码性能，第一次自己写for嵌套，list和array的更深了解
2. 代码习惯。变量名，函数名，不应以描述变量或函数性质为主，而应以读者角度来看待的功能描述为主。
3. 四元数计算掌握，四元数原理掌握，看到四元数能手动计算出旋转角、通过自定旋转角算出对应四元数（背景知识还有很多，亟待了解。单纯计算可以借助vtk或者其他库的api来进行）
4. 要积累自己的小工具，如计算的脚本，或者语法小词典，不限于python或者matlab、c++，干活时随手能找到

目前环境这样搭配的，主要利用conda配置，但是不知道为什么，conda配置虚拟环境有时候会造成奇奇怪怪的问题。

<img src="../image/2.png" alt="2" style="zoom:50%;" />

# 仍明显不足的地方

1. 数据保存的位置。比如一个函数走完后，他的数据或者说我们想要得到的数据去了哪里，如何保存

2. 开发环境配置。应该想清楚到底以本地自建目录来整理，还是通过ide或者pip等第三方工具来整理。做完这个任务更倾向于前者（如果手上有很多任务，存在占用空间过大的可能，不过几率较小）。

3. 调试代码。调试代码还不够熟练，总靠print或者打log太浪费时间，且信息不够全面。

4. 线程的知识还不了解


# 待优化

平均值处，先计算均值以及先计算旋转平移的顺序问题（从结果角度应该是相同的，可以尝试换一下顺序对比结果）


# 工作角度

## 如果这是一个要求时间比较紧的任务，有哪些做事方法可以改进？

时间紧张，那么应当提前预估完成任务需要的时间并予以反馈。

尽管在60分以及100分的任务效果中，选择者都有他的道理或者苦衷，但是有多少能力做多大的事。个人认为只是做完了领导分配到的任务，或者达成人生的某个小目标，这些是很多人都能做到的，并且只是为了结果并不注重过程的积累和磨练，单纯浪费时间。不如等到积累够数量，速度自然能很快。

在时间允许范围内，尽可能提升工作质量，远比赶进度一股脑做完，于工作，于自己，更为踏实有效。

如果就是眼下赶时间要结果，那么只能通过多沟通的方式，来减少走弯路的可能。

复用现有方法，远比重新撰写来的省时间。


## 时间开销


背景欠缺：
1. 语法（python语法较简单，目前语法上花费时间主要在numpy等三方库的接口使用）
2. 如何进行环境搭建更为整洁、方便使用
3. 项目背景，物理含义的理解学习，四元数知识
4. 重构的技巧，在合适的地方以及方法抽取函数，函数的自变量、因变量的选取
5. debug使用很不熟练，全靠手动print的方式过于笨拙，后半段逼迫自己使用debug效率有一小部分提升

重复跌倒：
1. 挣扎的变量名、函数名
2. 重构、提炼函数：刚开始写完整理流程后，再进行重构，有的地方需要重新写，不如一开始就注重函数的撰写
3. 当别人指出问题后，只注重局部修改，应当尝试了解问题背后的意义以及出发点，并立即检查当前任务是否有相同的错误
4. 环境搭建，不管是否考虑到整理干净开发环境的问题，如果有任务摆在眼前，配环境着实浪费时间

总之：重构路漫漫，习惯要在先

